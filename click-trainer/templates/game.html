{{define "game"}}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Click Trainer - Target Game</title>
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <script src="https://unpkg.com/htmx-ext-sse@2.2.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="/static/favicon.ico">
</head>

<body hx-ext="sse" class="bg-gray-700">
    <div id="game-content">
        {{template "gameContent" .}}
    </div>
    <div id="sse-conn"
        sse-connect="/events"
        sse-swap="none"
        hx-trigger="sse:update"
        hx-get="/poll"
        hx-target="#game-content"
        hx-swap="innerHTML"
    ></div>
</body>

</html>
{{end}}

{{define "gameContent"}}
<div class="p-4 h-screen relative">
    <div class="w-sm absolute top-4 right-4 z-1">
        {{template "scoreboard" .Players}}
    </div>    
    <div class="col-span-2 h-full flex flex-col justify-center items-center">
        <div id="game-area" class="relative bg-gray-200 border-4 border-gray-300" >
            {{range .Targets}}
                {{template "target" .}}
            {{end}}
        </div>
    </div>    
</div>
{{end}}

{{define "scoreboard"}}
<div class="grid grid-cols-2 gap-3 bg-white rounded-lg border-4 border-gray-300 p-4">
    <div class="text-sm text-gray-600">Player</div>
    <div class="text-sm text-gray-600">Score</div>

    <hr class="col-span-2 border-bottom border-gray-600" />
    
    {{range .}}
    <label class="text-sm font-bold border-bottom">{{ .Name }}</label>
    <div class="text-sm">{{ .Score}}</div>
    {{end}}
</div>
{{end}}




  